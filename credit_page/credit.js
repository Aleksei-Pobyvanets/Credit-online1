const mockData = [
	{"logo": "images/credit7.png", 
	"reiting":4.6,
	"summCredit": 100,
	"percent":0.01,
	"return": "",
	"isPopular":true,
	"Allusers": false,
	"fastCredit": false,
	"time": 3,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":3,
    "summCredit": 100,
	"percent":0.05,
	"return": "",
	"isPopular":false,
	"Allusers": true,
	"fastCredit": false,
	"time": 3,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/mycredit.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": true,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	},
	{"logo": "images/e4a3b2325134ba156bbef4f9b1fe7e02.png", 
	"reiting":5,
	"summCredit": 100,
	"percent":0.03,
	"return": "",
	"isPopular":false,
	"Allusers": false,
	"fastCredit": false,
	"time": 12,
	"firstCr": "500 - 7 000",
	"scndCr": "500 - 5 000",
	"srok": "2 - 30 дней",
	}
]


function renderTemplaite(props) {
	const {data, summCredit ,time } = props

	const price = summCredit ? summCredit : data.summCredit
	const month = time ? time : data.time

	const SummAmmount = (price*data.percent) + (month*2) + price;
	const persentCalculate = (price*data.percent) + (month*2) 

	
	

	return `
	<div class="box1" >

	${data.isPopular ? "<div class='isPopularDiv'><p class='isPopularP'>98% одобрений</p></div>" : ""}
	${data.Allusers ? "<div class='AllusersDiv'><p class='AllusersP'>Лучшее предложение</p></div>" : ""}
	${data.fastCredit ? "<div class='fastCreditDiv'><p class='fastCreditP'>Кредит за 15 минут</p></div>" : ""}


		<div class="box">
		<div class="box_logo_block">
			<div class="box_logo_block_img">
				<img src="${data.logo}" class='img_bl_box' />
			</div>
			<div class="box_logo_stars_block">
				<div class="stars">
					<div class="star">
						<i class="far fa-star" style=' font-size: 16px'></i>
					</div>
					<div class="star">
					<i class="far fa-star" style=' font-size: 16px'></i>
					</div>
					<div class="star">
					<i class="far fa-star" style=' font-size: 16px'></i>
					</div>
					<div class="star">
					<i class="far fa-star" style=' font-size: 16px'></i>
					</div>
					<div class="star">
					<i class="far fa-star" style=' font-size: 16px'></i>
					</div>
				</div>
				<p class="ball">(${data.reiting})</p>
			</div>
		</div>

		<div class="main_part">
			<div class="main_part_top">
				<div class="main_part_top_summ">
					<p class="main_part_top_summ_txt">Сумма кредита</p>
					<div class="main_part_top_summ_bl">
						<p class="main_part_top_summ_numb" id="">${price} <p class="main_part_top_summ_numb_grn">грн</p></p>
					</div>
				</div>
				<div class="main_part_top_summ">
					<p class="main_part_top_prozents_txt">Проценты</p>
					<div class="main_part_top_summ_bl2">
						<p class="main_part_top_summ_numb" id=""> ${persentCalculate}</p>
						<p class="main_part_top_summ_numb_grn">грн</p>
					</div>
				</div>
				<div class="main_part_top_summ">
					<p class="main_part_top_back_txt">Сумма кредита</p>
					<div class="main_part_top_summ_bl3">
						<p class="main_part_top_summ_numb" id="">${SummAmmount}</p>
						<p class="main_part_top_summ_numb_grn">грн</p>
					</div>
				</div>
			</div>
				<div class="main_part_line"></div>
			<div class="main_part_bottom">
				<div class="main_part_bottom_summ">
					<p class="main_part_bottom_summ_txt">Первый кредит</p>
					<p class="main_part_bottom_summ_numb">${data.firstCr}</p>
				</div>
				<div class="main_part_bottom_summ">
					<p class="main_part_bottom_summ_txt">Повторный кредит</p>
					<p class="main_part_bottom_summ_numb">${data.scndCr}</p>
				</div>
				<div class="main_part_bottom_summ">
					<p class="main_part_bottom_summ_txt">Срок</p>
					<p class="main_part_bottom_summ_numb">${data.srok}</p>
				</div>
			</div>
		</div>

		<div class="last_block">
			<div class="last_block_proz">
				<div class="last_block_proz_box">
					<p class="last_block_proz_txt">${data.percent}%</p>
				</div>
				<div class="last_block_txt_box">
					<p class="last_block_txt">на первый кредит</p>
				</div>
			</div>
			<div class="bnt">
				<p class='bnt_txt'>получить кредит</p>
			</div>
		</div>
	</div>

	<div class="box44">
    
    <div class="box3">
        <div class="box_logo_block1">
            <div class="box_logo_block_img">
                <img src="${data.logo}" class='img_bl_box' />
            </div>
            <div class="box_logo_stars_block1">
                <div class="stars">
                    <div class="star">
                        <i class="far fa-star" style=' font-size: 16px'></i>
                    </div>
                    <div class="star">
                    <i class="far fa-star" style=' font-size: 16px'></i>
                    </div>
                    <div class="star">
                    <i class="far fa-star" style=' font-size: 16px'></i>
                    </div>
                    <div class="star">
                    <i class="far fa-star" style=' font-size: 16px'></i>
                    </div>
                    <div class="star">
                    <i class="far fa-star" style=' font-size: 16px'></i>
                    </div>
                </div>
                <p class="ball">(${data.reiting})</p>
            </div>
        </div>
        <div class="last_block_proz">
            <div class="last_block_proz_box">
                <p class="last_block_proz_txt">${data.percent}%</p>
            </div>
            <div class="last_block_txt_box1">
                <p class="last_block_txt">на первый кредит</p>
            </div>
        </div>
    </div>


    <div class="main_part1">
        <div class="main_part_top">
            <div class="main_part_top_summ">
                <p class="main_part_top_summ_txt">Сумма кредита</p>
                <div class="main_part_top_summ_bl">
                    <p class="main_part_top_summ_numb" id="">${price} <p class="main_part_top_summ_numb_grn">грн</p></p>
                </div>
            </div>
            <div class="main_part_top_summ">
                <p class="main_part_top_prozents_txt">Проценты</p>
                <div class="main_part_top_summ_bl2">
                    <p class="main_part_top_summ_numb" id=""> ${persentCalculate}</p>
                    <p class="main_part_top_summ_numb_grn">грн</p>
                </div>
            </div>
            <div class="main_part_top_summ">
                <p class="main_part_top_back_txt">Сумма кредита</p>
                <div class="main_part_top_summ_bl3">
                    <p class="main_part_top_summ_numb" id="">${SummAmmount}</p>
                    <p class="main_part_top_summ_numb_grn">грн</p>
                </div>
            </div>
        </div>
            <div class="main_part_line"></div>
        <div class="main_part_bottom1">
            <div class="main_part_bottom_summ1">
                <p class="main_part_bottom_summ_txt">Первый кредит</p>
                <p class="main_part_bottom_summ_numb1">${data.firstCr}</p>
            </div>
            <div class="main_part_bottom_summ1">
                <p class="main_part_bottom_summ_txt">Повторный кредит</p>
                <p class="main_part_bottom_summ_numb1">${data.scndCr}</p>
            </div>
            <div class="main_part_bottom_summ1">
                <p class="main_part_bottom_summ_txt">Срок</p>
                <p class="main_part_bottom_summ_numb1">${data.srok}</p>
            </div>
        </div>
    </div>

    <div class="last_block1">
        
        <div class="bnt">
            <p class='bnt_txt'>получить кредит</p>
        </div>
    </div>
</div>

</div>  
	`;
  }
	const summCredit = document.getElementById("summSl");
	const time =document.getElementById("timeSl");
	const msumm = document.getElementById("msumm")
	const mtime = document.getElementById("mtime")
	

	summCredit.addEventListener("change", (e) => {
		const s = parseInt( e.target.value )
		const t = parseInt( time.value )
		renderCreditItems({data : mockData, summCredit: s, time: t})
	})
	time.addEventListener("change", (e) => {
		const t = parseInt( e.target.value )
		const s = parseInt( summCredit.value )
		renderCreditItems({data : mockData, time: t , summCredit: s })
	})

	function calc(){
		const SC = parseInt(document.getElementById("summSl").value);
		const TM = parseInt(document.getElementById("timeSl").value);
		msumm.innerHTML = SC;
		mtime.innerHTML = TM;
	}
	
	
function renderCreditItems(props) {
	const { data, summCredit ,time } = props
	if(data.length === 0) return false
	const creditItems = document.getElementById('creditItems')
	const templeit = data.map(element => {
	return renderTemplaite({data: element, summCredit:summCredit, time:time })
	}).join("")	
	creditItems.innerHTML = templeit
}
renderCreditItems({data : mockData});

	formReg = document.getElementById("formReg")
	formReg.addEventListener('submit', (e) => {
		e.preventDefault();
		var hr = new XMLHttpRequest();
		var url = "/send.php";
		var summSl = document.getElementById("summSl").value;
		var timeSl = document.getElementById("timeSl").value;
		var vars ="&summSl="+summSl+"&timeSl="+timeSl;
		console.log(vars)
		hr.open("POST", url, true);
		hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		hr.onreadystatechange = function() {
			console.log(hr);

			if(hr.readyState == 4 && hr.status == 200) {
				var return_data = hr.responseText;
				document.getElementById("status").innerHTML = return_data;
			}
		}

		hr.send(vars);
		document.getElementById("status").innerHTML = "processing...";

	})